input {
  http {
    port => ${LOGSTASH_PORT}
    response_headers => {
      "Access-Control-Allow-Origin" => "*"
      "Access-Control-Allow-Headers" => "Content-Type"
    }
  }
}

filter {
  if [headers][request_method] == "OPTIONS" {
    drop { }
  }
}

output {
  stdout {
    codec => rubydebug
  }

  elasticsearch {
    hosts => "${ELASTICSEARCH_HOST}:${ELASTICSEARCH_PORT}"
    index => "cvat-client"
  }
}
