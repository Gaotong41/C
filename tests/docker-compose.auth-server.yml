version: '3.3'

services:
  cvat_server:
    environment:
      - TESTING="True"
  google_auth_server:
    image: python:3.9-slim
    restart: always
    environment:
      - AUTH_SERVER_HOST="test-google"
      - AUTH_SERVER_PORT=8083
    ports:
      - '8083:8083'
    command: python3 /tmp/server.py --server "google"
    volumes:
      - ./tests/python/authentication_server:/tmp
    networks:
      cvat:
        aliases:
          - test-google

  github_auth_server:
    image: python:3.9-slim
    restart: always
    environment:
      - AUTH_SERVER_HOST="test-github"
      - AUTH_SERVER_PORT=8084
    ports:
      - '8084:8084'
    command: python3 /tmp/server.py --server "github"
    volumes:
      - ./tests/python/authentication_server:/tmp
    networks:
      cvat:
        aliases:
          - test-github
